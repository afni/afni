PROJECT(NIFTICDFLIB)

IF (NOT DEFINED NIFTICDF_SHAREDLIB_VERSION)
  SET (NIFTICDF_SHAREDLIB_VERSION ${NIFTI_SHAREDLIB_VERSION})
ENDIF (NOT DEFINED NIFTICDF_SHAREDLIB_VERSION)

STRING( REGEX MATCH "^[0-9]+" NIFTICDF_SHAREDLIB_SOVERSION ${NIFTICDF_SHAREDLIB_VERSION})

INCLUDE_DIRECTORIES(${NIFTILIB_SOURCE_DIR})
#INCLUDE_DIRECTORIES(/usr/include/nifti)
SET(NIFTICDFLIB_SRC nifticdf.c)

SET(NIFTI_CDFLIB_NAME ${PACKAGE_PREFIX}nifticdf)

ADD_LIBRARY(${NIFTI_CDFLIB_NAME} ${NIFTICDFLIB_SRC} )

IF (BUILD_SHARED_LIBS)
  SET_TARGET_PROPERTIES(${NIFTI_CDFLIB_NAME} PROPERTIES SOVERSION ${NIFTICDF_SHAREDLIB_SOVERSION} VERSION ${NIFTICDF_SHAREDLIB_VERSION})
ENDIF (BUILD_SHARED_LIBS)


IF(NOT NIFTI_INSTALL_NO_LIBRARIES)
  INSTALL(TARGETS ${NIFTI_CDFLIB_NAME}
    RUNTIME DESTINATION ${NIFTI_INSTALL_BIN_DIR} COMPONENT RuntimeLibraries
    LIBRARY DESTINATION ${NIFTI_INSTALL_LIB_DIR} COMPONENT RuntimeLibraries
    ARCHIVE DESTINATION ${NIFTI_INSTALL_LIB_DIR} COMPONENT Development)
ENDIF(NOT NIFTI_INSTALL_NO_LIBRARIES)

IF(NOT NIFTI_INSTALL_NO_DEVELOPMENT)
  FILE(GLOB __files "${CMAKE_CURRENT_SOURCE_DIR}/*.h")
  INSTALL(FILES ${__files}
    DESTINATION ${NIFTI_INSTALL_INCLUDE_DIR}
    COMPONENT Development)
ENDIF(NOT NIFTI_INSTALL_NO_DEVELOPMENT)
