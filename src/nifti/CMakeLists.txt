#File Generated by Hans J. Johnson
#Please contact hans-johnson@uiowa.edu for making enhancments/corrections
PROJECT(NIFTI)
# Configure Dart testing support.
INCLUDE(${CMAKE_ROOT}/Modules/Dart.cmake)

SUBDIRS(znzlib niftilib)
ADD_DEFINITIONS(-DHAVE_ZLIB)


###  USE AS PART OF ITK
IF("${ITK_VERSION_MAJOR}" GREATER 0.0)
#   MESSAGE(STATUS "---------------------ITK ZLIB  ${ITK_ZLIB_LIBRARIES}")
  ADD_DEFINITIONS(-DITKZLIB)
  SET(PACKAGE_PREFIX "ITK")
  SET(NIFTI_INSTALL_LIB_DIR "${ITK_INSTALL_LIB_DIR_CM24}")
  SET(NIFTI_INSTALL_BIN_DIR "${ITK_INSTALL_BIN_DIR_CM24}")
  SET(NIFTI_INSTALL_INCLUDE_DIR "${ITK_INSTALL_INCLUDE_DIR_CM24}")
  SET(NIFTI_ZLIB_LIBRARIES ${ITK_ZLIB_LIBRARIES})
  SET(NIFTI_INSTALL_NO_DEVELOPMENT ${ITK_INSTALL_NO_DEVELOPMENT})
  SET(NIFTI_INSTALL_NO_LIBRARIES ${ITK_INSTALL_NO_LIBRARIES})
ELSE("${ITK_VERSION_MAJOR}" GREATER 0.0)
###  USE AS STAND ALONE PACKAGE
   FIND_PACKAGE(ZLIB)
#  MESSAGE(STATUS "---------------------SYSTEM ZLIB ${ZLIB_LIBRARY}")
  SET(NIFTI_ZLIB_LIBRARIES ${ZLIB_LIBRARIES})
  SET(PACKAGE_PREFIX "")
  SET(NIFTI_INSTALL_LIB_DIR "lib")
  SET(NIFTI_INSTALL_BIN_DIR "bin")
  SET(NIFTI_INSTALL_INCLUDE_DIR "include")
  SET(NIFTI_INSTALL_NO_DEVELOPMENT 0)
  SET(NIFTI_INSTALL_NO_LIBRARIES 0)

  #Needs an if clause and more work before testing can take place.
  SUBDIRS(Testing)
  SUBDIRS(nifticdf utils)

  OPTION(USE_FSL_CODE "If OFF, The copyright of this code is questionable for inclusion with nifti." OFF)
  MARK_AS_ADVANCED(USE_FSL_CODE)
  IF(USE_FSL_CODE)
    SUBDIRS(examples)
    SUBDIRS(fsliolib)
  ENDIF(USE_FSL_CODE)
  ENABLE_TESTING()
ENDIF("${ITK_VERSION_MAJOR}" GREATER 0.0)
