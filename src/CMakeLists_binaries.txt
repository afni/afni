foreach(target 1dAstrip 1dBandpass 1dBport 1dCorrelate 1dFlagMotion 1dMarry
    1dTsort 1dUpsample 1dcat 1ddot 1dfft 1dgenARMA11 1dnorm 1dsum
    1dsvd 1dtranspose 24swap 2dImReg 2perm 2swap 3dABoverlap
    3dAFNIto3D 3dAFNItoANALYZE 3dAFNItoMINC 3dAFNItoNIFTI
    3dAFNItoNIML 3dAFNItoRaw 3dANALYZEtoAFNI 3dAcost 3dAnatNudge
    3dAnhist 3dAttribute 3dAutoTcorrelate 3dAutobox 3dAutomask
    3dBandpass 3dBlurInMask 3dBlurToFWHM 3dBrickStat 3dCM
    3dClipLevel 3dClustCount 3dClustSim 3dConformist 3dConvolve
    3dCountSpikes 3dDFT 3dDTeig 3dDTtoDWI 3dDWItoDT
    3dDegreeCentrality 3dDespike 3dEmpty 3dEntropy 3dErrtsCormat
    3dExtractGroupInCorr 3dExtrema 3dFDR 3dFFT 3dFWHM 3dFWHMx
    3dFourier 3dFriedman 3dGetrow 3dGroupInCorr 3dIntracranial
    3dInvFMRI 3dKruskalWallis 3dLFCD 3dLRflip 3dLSS 3dLocalACF
    3dLocalBistat 3dLocalHistog 3dLocalPV 3dLocalSVD 3dLocalstat
    3dMINCtoAFNI 3dMannWhitney 3dMean 3dMedianFilter 3dMultiThresh
       3dNormalityTest 3dNotes 3dNwarpAdjust 3dNwarpApply
    3dNwarpCalc 3dNwarpCat 3dNwarpFuncs 3dNwarpXYZ 3dOverlap
    3dPeriodogram 3dPolyfit 3dPval 3dQwarp 3dREMLfit 3dROIstats
    3dRank 3dRankizer 3dRegAna 3dRetinoPhase 3dRowFillin
    3dSetupGroupInCorr 3dSharpen 3dSpatNorm 3dStatClust 3dSynthesize
       3dTRfix 3dTagalign 3dTcat 3dTcorr1D 3dTcorrMap
    3dTcorrelate 3dTfilter 3dThreetoRGB 3dTnorm 3dToutcount
    3dToyProg 3dTproject 3dTqual 3dTshift 3dTsmooth 3dTsort
    3dTsplit4D 3dTwotoComplex 3dUndump 3dUnifize 3dUniformize
    3dUpsample 3dWarp 3dWarpDrive 3dWavelets 3dWilcoxon 3dWinsor
    3dXClustSim 3dXYZcat 3dZcat 3dZcutup 3dZeropad 3dZregrid
    3daxialize 3dbuc2fim 3dbucket 3dcopy 3ddelay 3ddot 3ddup 3dfim+
    3dfractionize 3dinfo 3dmaskSVD 3dmask_tool 3dmaskave 3dmatmult
    3dnewid 3dnoise 3dnvals 3dpc 3drefit 3drename 3drotate
    3dsvm_linpredict 3dtoXdataset 3dttest++ 3dvolreg 4swap AlphaSim
    DTIStudioFibertoSegments FIRdesign GLTsymtest Ifile RSFgen
    Vecwarp abut adwarp afni_vcheck apsearch bitvec byteorder
    cat_matvec cdf count dicom_hdr dicom_hinfo dicom_to_raw ent16
    epsim exx fdrval fftest float_scan from3d ftosh ge_header
    help_format ibinom im2niml images_equal imand imaver imcalc
    imcat imcutup imdump immask imrotate imstack imstat imupsam
    mayo_analyze mritopgm mycat myget nicat niccc nidset nimel
    niml_feedme nimltest nsize plugout_drive plugout_ijk plugout_tt
    plugout_tta quotize rmz rotcom rtfeedme sfim siemens_vision
    sqwave stimband strblast test_powell testcox tfim uncomment
    uniq_images unu warping_test whereami whirlgif
)
  add_executable(${target} ${target}.c)
  target_include_directories(${target} PRIVATE NIFTI::nifti2)
  target_link_libraries(${target} PRIVATE mri NIFTI::nifti2)
endforeach(target)

foreach(i "" 2 3)
  set(target 3dANOVA${i}) 
  add_executable(${target} ${target}.c 3dANOVA.lib)
  target_link_libraries(${target} PRIVATE mrix)
endforeach(i)

foreach(target 1dNLfit 1deval 1dmatcalc 3dDeconvolve 3dDetrend 3dTstat 3dcalc
    3dclust 3dhistog 3dmaskdump 3dmatcalc 3dmerge 3dproject 3dttest
    ccalc waver
)
  add_executable(${target} ${target}.c $<TARGET_OBJECTS:parser>)
  target_link_libraries(${target} PRIVATE mrix)
endforeach(target)
target_link_libraries(3dproject PRIVATE AFNI::volpack)


add_executable(3dTfitter 3dTfitter.c thd_fitter.c thd_lasso.c)
add_executable(3dfim 3dfim.c ts.c "${CMAKE_CURRENT_BINARY_DIR}/configured_pcor/afni_pcor_float.c")
add_executable(FD2 FD2.c ts.c mcw.c overfim.c $<TARGET_OBJECTS:pcorsh> csfft_AJ.c)
add_executable(fim2 fim2.c ts.c $<TARGET_OBJECTS:pcor>)
add_executable(imreg imreg.c $<TARGET_OBJECTS:pcor>)
add_executable(to3d to3d.c)
add_executable(3danisosmooth 3danisosmooth.c DWIstructtensor.c)
add_executable(1dSEM 1dSEM.c sqrmat.c matrix.c)
add_executable(3dNLfim 3dNLfim.c)
add_executable(gwarp mri_gwarp.c)
add_executable(3dmaxima 3dmaxima.c maxima.c)
add_executable(3dDeconvolve_n 3dDeconvolve.c $<TARGET_OBJECTS:parser>)
add_executable(3dDeconvolve_f 3dDeconvolve.c $<TARGET_OBJECTS:parser>)
add_executable(3dAllineate 3dAllineate.c mri_genalign.c mri_genalign_util.c thd_correlate.c)
add_executable(3dECM 3dECM.c sparse_array.c)
add_executable(3dMSE 3dMSE.c sparse_array.c)
add_executable(1dgrayplot 1dgrayplot.c display.c)
add_executable(1dplot 1dplot.c display.c)
add_executable(3dretroicor 3dretroicor.c retroicor.c)
# add_executable(3dedge3 3dedge3.c)


set_source_files_properties(3dDeconvolve_f PROPERTIES COMPILE_DEFINITIONS "FLOATIZE")

target_include_directories(3dretroicor PRIVATE $<TARGET_PROPERTY:NIFTI::nifti2,INTERFACE_INCLUDE_DIRECTORIES>)

target_include_directories(to3d PRIVATE ${MOTIF_INCLUDE_DIR} )
target_include_directories(1dplot PRIVATE  ${XT_INCLUDE_DIR} ${X11_INCLUDE_DIRS} )

foreach(target 3dfim 3dTfitter FD2 fim2 imreg gwarp 3danisosmooth 3dmaxima
       3dAllineate 3dECM 3dMSE 1dSEM 
)

   target_link_libraries(${target} PRIVATE mrix NIFTI::nifticdf)
endforeach(target)
target_link_libraries(3dretroicor PRIVATE mrix AFNI::coxplot AFNI::f2cdir)
target_link_libraries(3dNLfim PRIVATE mrix ${CMAKE_DL_LIBS})


target_link_libraries(1dgrayplot PRIVATE mri AFNI::coxplot ${X11_Xt_LIB})
target_link_libraries(1dplot PRIVATE mrix AFNI::eispack NIFTI::nifti2 ${X11_Xt_LIB} ${X11_LIBRARIES})
target_link_libraries(3dDeconvolve PRIVATE mri AFNI::coxplot)
target_link_libraries(3dDeconvolve_f PRIVATE mri AFNI::coxplot)
target_link_libraries(3dDeconvolve_n PRIVATE mri AFNI::coxplot)

target_link_libraries(to3d PRIVATE mrix NIFTI::nifti2 ${MOTIF_LIBRARIES})

# link remaining executables from rickr
add_executable(Dimon rickr/Dimon.c rickr/realtime.c)
add_executable(Dimon1 rickr/Dimon1.c rickr/realtime1.c)
add_executable(3dresample rickr/3dresample.c)
target_include_directories(3dresample PRIVATE $<TARGET_PROPERTY:AFNI::coxplot,INTERFACE_INCLUDE_DIRECTORIES>  $<TARGET_PROPERTY:NIFTI::nifti2,INTERFACE_INCLUDE_DIRECTORIES> )
target_link_libraries(3dresample mri libheaders audio AFNI::eispack)

target_link_libraries(Dimon1 PRIVATE mri)
target_link_libraries(Dimon PRIVATE mri)


add_executable(3dTSgen 3dTSgen.c)
target_link_libraries(3dTSgen mri  AFNI::coxplot NIFTI::nifti2 ${CMAKE_DL_LIBS})

